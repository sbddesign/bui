import { readFileSync, writeFileSync } from 'fs';
import { join, dirname } from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const DATA_PATH = join(__dirname, '../data/components.json');
const OUTPUT_PATH = join(__dirname, '../src/component-data.ts');

const data = readFileSync(DATA_PATH, 'utf-8');
const componentData = JSON.parse(data);

const tsContent = `// Auto-generated component data
// Do not edit this file directly - it is generated from data/components.json

export const componentData = ${JSON.stringify(componentData, null, 2)} as const;

export type ComponentData = typeof componentData;
`;

writeFileSync(OUTPUT_PATH, tsContent);
console.log(`Embedded component data into ${OUTPUT_PATH}`);
